<!doctype html><html lang="ko-KR" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" > <script data-goatcounter="https://sourla.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="javascript로 OCR 하기" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="javascript OCR" /><meta property="og:description" content="javascript OCR" /><link rel="canonical" href="https://sourla.github.io/posts/textscanner/" /><meta property="og:url" content="https://sourla.github.io/posts/textscanner/" /><meta property="og:site_name" content="KimAresen’s blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-02-03T14:54:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="javascript로 OCR 하기" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-02-03T15:19:19+09:00","datePublished":"2022-02-03T14:54:00+09:00","description":"javascript OCR","headline":"javascript로 OCR 하기","mainEntityOfPage":{"@type":"WebPage","@id":"https://sourla.github.io/posts/textscanner/"},"url":"https://sourla.github.io/posts/textscanner/"}</script><title>javascript로 OCR 하기 | KimAresen's blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="KimAresen's blog"><meta name="application-name" content="KimAresen's blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.21.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"><body><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"> <img src="https://avatars.githubusercontent.com/u/45420310?v=4" width="112" height="112" alt="avatar" onerror="this.style.display='none'"> </a><div class="site-title"> <a href="/">KimAresen's blog</a></div><div class="site-subtitle fst-italic">일단 쓰고 정리해보자</div></div><ul class="nav flex-column flex-grow-1 w-100 ps-0"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>홈</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>카테고리</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>태그</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>아카이브</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>정보</span> </a></ul><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/sourla" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container px-xxl-5"><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100" > <span id="breadcrumb"> <span> <a href="/"> 홈 </a> </span> <span>javascript로 OCR 하기</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 포스트</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="검색..." > </span> <span id="search-cancel">취소</span></div></div><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pe-xl-4"><div class="post px-1 px-md-2"><h1 data-toc-skip>javascript로 OCR 하기</h1><div class="post-meta text-muted"> <span> 게시 <em class="" data-ts="1643867640" data-df="DD/MM/YYYY" data-bs-toggle="tooltip" data-bs-placement="bottom" > 03/02/2022 </em> </span> <span> 업데이트 <em class="" data-ts="1643869159" data-df="DD/MM/YYYY" data-bs-toggle="tooltip" data-bs-placement="bottom" > 03/02/2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">KimAresen</a> </em> </span><div> <em id="pageviews"></em> views <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="776 단어" > <em>4 분</em>읽는 시간</span></div></div></div><div class="post-content"><h1 id="javascript-ocr">javascript OCR</h1><ol><li>javascript로 OCR하기 필요한 내용<ul><li>tesseract 를 사용하여 OCR을 진행함<li>캡쳐 기능으로 부분 OCR을 하기 위해 하기 script 추가<li>2배 확대 등을 하기 위한 canvas 기능 및 javascript library 추가<li>그냥 쓰려고 해봤는데 텍스트 인식률이 생각보다 안나와서 확대하여 사용하기 위함</ul></ol><div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://html2canvas.hertzen.com/dist/html2canvas.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></table></code></div></div><ol><li>하기 코드는 텍스트 OCR을 적용한 실제 코드이며 실제로 특정 부위만 캡처를 하기 위하여 수정한 코드.<ul><li>캡쳐 영역을 컨트롤 하기 위한 mousedown, mouseup, mousemove 코드<li>캡쳐된 이미지를 canvas로 한번 생성, canvas를 생성하여 2배 확대<li>2배 확대된 이미지를 Tesseract로 텍스트 인식하도록 수정<li>하기 캡처에 사용한 css도 첨부함</ul></ol><div class="language-css highlighter-rouge"><div class="code-header"> <span data-label-text="CSS"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre><td class="rouge-code"><pre>
            <span class="nf">#screenshot_mask</span> <span class="p">{</span>
                <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
                <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
                <span class="nl">position</span><span class="p">:</span> <span class="nb">fixed</span><span class="p">;</span>
                <span class="nl">top</span><span class="p">:</span> <span class="m">0px</span><span class="p">;</span>
                <span class="nl">left</span><span class="p">:</span> <span class="m">0px</span><span class="p">;</span>
                <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
                <span class="nl">opacity</span><span class="p">:</span> <span class="m">0.3</span><span class="p">;</span>
                <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
                <span class="nl">box-sizing</span><span class="p">:</span> <span class="nb">border-box</span><span class="p">;</span>
                <span class="nl">z-index</span><span class="p">:</span> <span class="m">2147483647</span><span class="p">;</span>
                <span class="nl">border-color</span><span class="p">:</span> <span class="nx">black</span><span class="p">;</span>
                <span class="nl">border-style</span><span class="p">:</span> <span class="nb">solid</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nf">#screenshot_focus</span><span class="nd">:before</span><span class="o">,</span>
            <span class="nf">#screenshot_focus</span><span class="nd">:after</span> <span class="p">{</span>
                <span class="nl">border</span><span class="p">:</span> <span class="nb">none</span> <span class="cp">!important</span><span class="p">;</span>
                <span class="nl">content</span><span class="p">:</span> <span class="s2">''</span> <span class="cp">!important</span><span class="p">;</span>
                <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span> <span class="cp">!important</span><span class="p">;</span>
                <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span> <span class="cp">!important</span><span class="p">;</span>
                <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span> <span class="cp">!important</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nf">#screenshot_focus</span><span class="nd">:before</span> <span class="p">{</span>
                <span class="nl">border-right</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="nx">white</span> <span class="cp">!important</span><span class="p">;</span>
                <span class="nl">border-bottom</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="nx">white</span> <span class="cp">!important</span><span class="p">;</span>
                <span class="nl">left</span><span class="p">:</span> <span class="m">-100%</span> <span class="cp">!important</span><span class="p">;</span>
                <span class="nl">top</span><span class="p">:</span> <span class="m">-100%</span> <span class="cp">!important</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nf">#screenshot_focus</span><span class="nd">:after</span> <span class="p">{</span>
                <span class="nl">border-top</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="nx">white</span> <span class="cp">!important</span><span class="p">;</span>
                <span class="nl">border-left</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="nx">white</span> <span class="cp">!important</span><span class="p">;</span>
                <span class="nl">left</span><span class="p">:</span> <span class="m">0</span> <span class="cp">!important</span><span class="p">;</span>
                <span class="nl">top</span><span class="p">:</span> <span class="m">0</span> <span class="cp">!important</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nf">#screenshot_focus</span> <span class="p">{</span>
                <span class="nl">height</span><span class="p">:</span> <span class="m">100%</span> <span class="cp">!important</span><span class="p">;</span>
                <span class="nl">position</span><span class="p">:</span> <span class="nb">fixed</span> <span class="cp">!important</span><span class="p">;</span>
                <span class="nl">width</span><span class="p">:</span> <span class="m">100%</span> <span class="cp">!important</span><span class="p">;</span>
                <span class="nl">z-index</span><span class="p">:</span> <span class="m">2147483648</span> <span class="cp">!important</span><span class="p">;</span>
            <span class="p">}</span>

</pre></table></code></div></div><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="복사되었습니다!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
</pre><td class="rouge-code"><pre>    <span class="kd">function</span> <span class="nf">captureTxt</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">//캡쳐 기능 활성화</span>
                <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nf">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nf">width</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">$mask</span> <span class="o">=</span> <span class="nf">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;div id="screenshot_mask"&gt;&lt;/div&gt;</span><span class="dl">'</span><span class="p">).</span><span class="nf">css</span><span class="p">(</span><span class="dl">'</span><span class="s1">border-width</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">0 0 </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px 0</span><span class="dl">'</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">$focus</span> <span class="o">=</span> <span class="nf">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;div id="screenshot_focus"&gt;&lt;/div&gt;</span><span class="dl">'</span><span class="p">);</span>
                <span class="nf">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">body</span><span class="dl">'</span><span class="p">).</span><span class="nf">append</span><span class="p">(</span><span class="nx">$mask</span><span class="p">);</span> <span class="c1">//dimmed 추가</span>
                <span class="nf">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">body</span><span class="dl">'</span><span class="p">).</span><span class="nf">append</span><span class="p">(</span><span class="nx">$focus</span><span class="p">);</span> <span class="c1">//마우스 커서에 따라 캡쳐 영역을 만들 div</span>
                <span class="kd">var</span> <span class="nx">selectArea</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="nf">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">body</span><span class="dl">'</span><span class="p">)</span>
                    <span class="p">.</span><span class="nf">one</span><span class="p">(</span><span class="dl">'</span><span class="s1">mousedown</span><span class="dl">'</span><span class="p">,</span> <span class="nf">function </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">//캡쳐 영역 선택 시작</span>
                        <span class="nx">e</span><span class="p">.</span><span class="nf">preventDefault</span><span class="p">();</span>
                        <span class="nx">selectArea</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                        <span class="nx">startX</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientX</span><span class="p">;</span>
                        <span class="nx">startY</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientY</span><span class="p">;</span>
                    <span class="p">})</span>
                    <span class="p">.</span><span class="nf">one</span><span class="p">(</span><span class="dl">'</span><span class="s1">mouseup</span><span class="dl">'</span><span class="p">,</span> <span class="nf">function </span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">//캡쳐 시작</span>
                        <span class="nx">selectArea</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                        <span class="nf">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">body</span><span class="dl">'</span><span class="p">).</span><span class="nf">off</span><span class="p">(</span><span class="dl">'</span><span class="s1">mousemove</span><span class="dl">'</span><span class="p">,</span> <span class="nx">mousemove</span><span class="p">);</span> <span class="c1">//이벤트 삭제</span>
                        <span class="nf">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#screenshot_focus</span><span class="dl">'</span><span class="p">).</span><span class="nf">remove</span><span class="p">();</span> <span class="c1">//마우스 포커스 삭제</span>
                        <span class="nf">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#screenshot_mask</span><span class="dl">'</span><span class="p">).</span><span class="nf">remove</span><span class="p">();</span> <span class="c1">//딤 삭제</span>
                        <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientX</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientY</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">top</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">min</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span> <span class="nx">startY</span><span class="p">);</span>
                        <span class="kd">var</span> <span class="nx">left</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">min</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">startX</span><span class="p">);</span>
                        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">max</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">startX</span><span class="p">)</span> <span class="o">-</span> <span class="nx">left</span><span class="p">;</span>
                        <span class="kd">var</span> <span class="nx">height</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">max</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span> <span class="nx">startY</span><span class="p">)</span> <span class="o">-</span> <span class="nx">top</span><span class="p">;</span>
                        <span class="nf">html2canvas</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nf">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#beforeImages</span><span class="dl">"</span><span class="p">),</span> <span class="p">{</span>
                        	<span class="na">useCORS</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
                        	<span class="na">width</span><span class="p">:</span><span class="nb">window</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">availWidth</span><span class="p">,</span>
                        	<span class="na">height</span><span class="p">:</span><span class="nb">window</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">availHeight</span><span class="p">,</span>
                        	<span class="c1">//windowWidth:document.body.scrollWidth,</span>
                        	<span class="c1">//windowHeight:document.body.scrollHeight,</span>
                        	<span class="na">x</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                        	<span class="na">y</span><span class="p">:</span><span class="nb">window</span><span class="p">.</span><span class="nx">pageYOffset</span>
                        	<span class="p">}).</span><span class="nf">then</span><span class="p">(</span><span class="nf">function </span><span class="p">(</span><span class="nx">canvas</span><span class="p">)</span> <span class="p">{</span>
                            <span class="c1">//전체 화면 캡쳐</span>
                            <span class="kd">var</span> <span class="nx">img</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nf">getContext</span><span class="p">(</span><span class="dl">'</span><span class="s1">2d</span><span class="dl">'</span><span class="p">).</span><span class="nf">getImageData</span><span class="p">(</span><span class="nx">left</span><span class="o">-</span><span class="mi">230</span><span class="p">,</span> <span class="nx">top</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="p">);</span> <span class="c1">//선택 영역만큼 crop</span>
                            <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">canvas</span><span class="dl">'</span><span class="p">);</span>
                            <span class="nx">c</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>
                            <span class="nx">c</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>
                            <span class="nx">c</span><span class="p">.</span><span class="nf">getContext</span><span class="p">(</span><span class="dl">'</span><span class="s1">2d</span><span class="dl">'</span><span class="p">).</span><span class="nf">putImageData</span><span class="p">(</span><span class="nx">img</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

                            <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nf">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">canvas</span><span class="dl">'</span><span class="p">);</span>
                            <span class="nx">d</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">width</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>
                            <span class="nx">d</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">height</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>
                            <span class="nx">d</span><span class="p">.</span><span class="nf">getContext</span><span class="p">(</span><span class="dl">'</span><span class="s1">2d</span><span class="dl">'</span><span class="p">).</span><span class="nf">scale</span><span class="p">(</span><span class="mf">1.2</span><span class="p">,</span><span class="mf">1.2</span><span class="p">);</span>
                            <span class="nx">d</span><span class="p">.</span><span class="nf">getContext</span><span class="p">(</span><span class="dl">'</span><span class="s1">2d</span><span class="dl">'</span><span class="p">).</span><span class="nf">drawImage</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>


                            <span class="c1">//$(document.body).append(d);</span>
                            <span class="nx">Tesseract</span><span class="p">.</span><span class="nf">recognize</span><span class="p">(</span>
                        			<span class="nx">d</span><span class="p">.</span><span class="nf">toDataURL</span><span class="p">(</span><span class="dl">'</span><span class="s1">image/jpeg</span><span class="dl">'</span><span class="p">),</span>
                        	  <span class="dl">'</span><span class="s1">kor+eng</span><span class="dl">'</span>
                        	<span class="p">).</span><span class="nf">then</span><span class="p">(({</span> <span class="na">data</span><span class="p">:</span> <span class="p">{</span> <span class="nx">text</span> <span class="p">}</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
                        	  <span class="c1">//console.log(text);</span>
                        	  	<span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nf">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">button[name='btnScantxt']</span><span class="dl">"</span><span class="p">).</span><span class="nf">index</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
								<span class="nf">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">#textArea textArea[name='sentence']</span><span class="dl">"</span><span class="p">).</span><span class="nf">eq</span><span class="p">(</span><span class="nx">index</span><span class="p">).</span><span class="nf">val</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
								<span class="nf">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">#textArea textArea[name='sentence']</span><span class="dl">"</span><span class="p">).</span><span class="nf">eq</span><span class="p">(</span><span class="nx">index</span><span class="p">).</span><span class="nf">change</span><span class="p">()</span>

                        	<span class="p">})</span>
                        <span class="p">});</span>
                    <span class="p">})</span>
                    <span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">mousemove</span><span class="dl">'</span><span class="p">,</span> <span class="nx">mousemove</span><span class="p">);</span> <span class="c1">//캡쳐 영역 크기 변경</span>
                <span class="kd">function</span> <span class="nf">mousemove</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientX</span><span class="p">;</span>
                    <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientY</span><span class="p">;</span>
                    <span class="nx">$focus</span><span class="p">.</span><span class="nf">css</span><span class="p">(</span><span class="dl">'</span><span class="s1">left</span><span class="dl">'</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span> <span class="c1">//마우스 커서 따라 좌표 포커스 이동</span>
                    <span class="nx">$focus</span><span class="p">.</span><span class="nf">css</span><span class="p">(</span><span class="dl">'</span><span class="s1">top</span><span class="dl">'</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
                    <span class="k">if </span><span class="p">(</span><span class="nx">selectArea</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">//캡쳐 영역 선택 그림</span>
                        <span class="kd">var</span> <span class="nx">top</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">min</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span> <span class="nx">startY</span><span class="p">);</span>
                        <span class="kd">var</span> <span class="nx">right</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">max</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">startX</span><span class="p">);</span>
                        <span class="kd">var</span> <span class="nx">bottom</span> <span class="o">=</span> <span class="nx">height</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">max</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span> <span class="nx">startY</span><span class="p">);</span>
                        <span class="kd">var</span> <span class="nx">left</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">min</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">startX</span><span class="p">);</span>
                        <span class="nx">$mask</span><span class="p">.</span><span class="nf">css</span><span class="p">(</span><span class="dl">'</span><span class="s1">border-width</span><span class="dl">'</span><span class="p">,</span> <span class="p">[</span><span class="nx">top</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">,</span> <span class="nx">right</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">,</span> <span class="nx">bottom</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">,</span> <span class="nx">left</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">px</span><span class="dl">'</span><span class="p">].</span><span class="nf">join</span><span class="p">(</span><span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">));</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>

</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href='/categories/javascript/'>javascript</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/javascript/" class="post-tag no-text-decoration" >javascript</a></div><script src="https://utteranc.es/client.js" repo="sourla/blogComment" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 이 기사는 저작권자의 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 라이센스를 따릅니다.</div><div class="share-wrapper"> <span class="share-label text-muted me-1">공유하기</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=javascript%EB%A1%9C%20OCR%20%ED%95%98%EA%B8%B0%20-%20KimAresen's%20blog&url=https%3A%2F%2Fsourla.github.io%2Fposts%2Ftextscanner%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter" > <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=javascript%EB%A1%9C%20OCR%20%ED%95%98%EA%B8%B0%20-%20KimAresen's%20blog&u=https%3A%2F%2Fsourla.github.io%2Fposts%2Ftextscanner%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook" > <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=javascript%EB%A1%9C%20OCR%20%ED%95%98%EA%B8%B0%20-%20KimAresen's%20blog&url=https%3A%2F%2Fsourla.github.io%2Fposts%2Ftextscanner%2F" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram" > <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-bs-toggle="tooltip" data-bs-placement="top" title="링크 복사하기" data-title-succeed="링크가 복사되었습니다!" > </i> </span></div></div><script> let pv = document.getElementById('pageviews'); if (pv !== null) { const uri = location.pathname.replace(/\/$/, ''); const url = `https://sourla.goatcounter.com/counter/${encodeURIComponent(uri)}.json`; fetch(url) .then((response) => response.json()) .then((data) => { const count = data.count.replace(/\s/g, ''); pv.innerText = new Intl.NumberFormat().format(count); }) .catch((error) => { pv.innerText = '1'; }); } </script></div></div></div><div id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">최근 업데이트</div><ul class="post-content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/intellij-tips/">Intellij 써보면서 이건 좋았다 하는 내용</a><li class="text-truncate lh-lg"> <a href="/posts/Intelij-command/">INTELLIJ 단축키</a><li class="text-truncate lh-lg"> <a href="/posts/Intellij-Debug/">intellij 디버깅 강의 보는중</a><li class="text-truncate lh-lg"> <a href="/posts/AutoLotto/">로또 자동사기</a><li class="text-truncate lh-lg"> <a href="/posts/first-my-writing/">첫 포스팅, 마크다운 문법</a></ul></div><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/intellij/">intellij</a> <a class="post-tag btn btn-outline-primary" href="/tags/java/">java</a> <a class="post-tag btn btn-outline-primary" href="/tags/javascript/">javascript</a> <a class="post-tag btn btn-outline-primary" href="/tags/tomcat/">tomcat</a> <a class="post-tag btn btn-outline-primary" href="/tags/browser/">browser</a> <a class="post-tag btn btn-outline-primary" href="/tags/db/">DB</a> <a class="post-tag btn btn-outline-primary" href="/tags/gitblog/">gitblog</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll-theme-chirpy/">jekyll-theme-chirpy</a> <a class="post-tag btn btn-outline-primary" href="/tags/markdown/">Markdown</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-3 pe-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ms-1" data-toc-skip> 관련된 글</h3><div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><div class="col"> <a href="/posts/ajaxinvalidaccess/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1659673740" data-df="DD/MM/YYYY" > 05/08/2022 </em><h4 class="pt-0 my-2" data-toc-skip>ajax async invalid access 에러</h4><div class="text-muted small"><p> ajax async invalid access 에러 증상 ajax async invalid access 에러로 인해 broswer 상 ajax가 호출이 안되는 증상 확인 원인 async false (동기)를 설정하니 브라우저 보안정책에서 해당 에러를 내는걸로 추정 조치 ...</p></div></div></a></div><div class="col"> <a href="/posts/javascript-callback-closer-nested/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1643271360" data-df="DD/MM/YYYY" > 27/01/2022 </em><h4 class="pt-0 my-2" data-toc-skip>Javascript 중첩함수 , 콜백 함수 , 클로저 함수</h4><div class="text-muted small"><p> Javascript 중첩함수 , 클로저 함수 , 콜백 함수 중첩 함수 외부에 있는 기능을 외부 기능이라고 합니다. 내부에 중첩된 함수를 내부 함수라고 합니다. 각 함수는 다른 인수를 받아들일 수 있습니다. function a(x) { // Outer function function b(y) { // inner function ...</p></div></div></a></div><div class="col"> <a href="/posts/AutoLotto/" class="card post-preview h-100"><div class="card-body"> <em class="small" data-ts="1684467420" data-df="DD/MM/YYYY" > 19/05/2023 </em><h4 class="pt-0 my-2" data-toc-skip>로또 자동사기</h4><div class="text-muted small"><p> github을 통해서 로또 자동으로 구매하기 Github Actions으로 로또 자동 구매하기 (지속적 로또) (소스와 구성이 궁금하다면 상위 링크 참고) velog 글을 보다가 흥미가 가는 글이 있어 해당 부분을 보며 로또 자동 구매를 만들었는데, 조금 개선을 하려고한다. 해당 소스에서는 py...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/javascript-callback-closer-nested/" class="btn btn-outline-primary" prompt="이전 글" ><p>Javascript 중첩함수 , 콜백 함수 , 클로저 함수</p></a> <a href="/posts/tomcat-security/" class="btn btn-outline-primary" prompt="다음 글" ><p>TOMCAT TLS 버전 문제</p></a></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">인기 태그</div><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/intellij/">intellij</a> <a class="post-tag btn btn-outline-primary" href="/tags/java/">java</a> <a class="post-tag btn btn-outline-primary" href="/tags/javascript/">javascript</a> <a class="post-tag btn btn-outline-primary" href="/tags/tomcat/">tomcat</a> <a class="post-tag btn btn-outline-primary" href="/tags/browser/">browser</a> <a class="post-tag btn btn-outline-primary" href="/tags/db/">DB</a> <a class="post-tag btn btn-outline-primary" href="/tags/gitblog/">gitblog</a> <a class="post-tag btn btn-outline-primary" href="/tags/github/">github</a> <a class="post-tag btn btn-outline-primary" href="/tags/jekyll-theme-chirpy/">jekyll-theme-chirpy</a> <a class="post-tag btn btn-outline-primary" href="/tags/markdown/">Markdown</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div></div><footer><div class="container px-lg-4"><div class="d-flex justify-content-center align-items-center text-muted mx-md-3"><p>Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p><p>© 2025 <a href="https://twitter.com/username">KimAresen</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="명시되지 않는 한 이 사이트의 블로그 게시물은 작성자의 Creative Commons Attribution 4.0 International(CC BY 4.0) 라이선스에 따라 사용이 허가되었습니다." >일부 권리 보유</span></p></div></div></footer><div id="mask"></div><button id="back-to-top" aria-label="back-to-top" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button> <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.0/dist/jquery.min.js,npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.7/dayjs.min.js,npm/dayjs@1.11.7/locale/ko.min.js,npm/dayjs@1.11.7/plugin/relativeTime.min.js,npm/dayjs@1.11.7/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/unregister.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="px-1 px-sm-2 px-lg-4 px-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
